on:
  workflow_call:

  push:
    branches-ignore:
      - main # Exclude pushes to the main branch
    paths-ignore:
      - ".*" # Exclude all directories starting with a "."
jobs:
  debug:
    runs-on: ubuntu-24.04
    steps:
      - run: ls

  chmod-gradlew:
    runs-on: ubuntu-24.04
    steps:
      - run: chmod +x ./gradlew

  spotless-check:
    needs: chmod-gradlew
    uses: ./.github/workflows/spotless-check.yml
  push:
    if: ${{ failure() }}
    needs: spotless-check
    runs-on: ubuntu-24.04
    steps:
      - uses: EndBug/add-and-commit@v9
        with:
          default_author: github_actions
